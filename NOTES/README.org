#+author: Rodrigo Francisco
#+date: <2021-09-03 Fri>

* Semana 01

** Introducción a Linux
*** Particiones

- MBR
- GTP
- Swap: También conocida como memoria de intercambio. Es una memoria virtual creada en disco, que sirve como soporte a la memoria RAM

*** COMMENT Kdump

*** Directorios

- /: El directorio principal
- bin: Binarios del usuario
- sbin: Binarios del sistema
- boot: Imágenes de arranque
- home
- etc: Archivos de configuración, tanto del sistema como de servicios y aplicaciones
- proc: Información de los procesos
- opt: Programas no nativos
- sys: Archivos virtuales para extraer información en tiempo real
- dev: Información de los dispositivos y vólumenes
- tmp: Archivos temporales
- usr: Archivos de los programas creados por los usuarios
- var: Variables, logs
- lib: Librerías del sistema

*** Configuraciones básicas

#+begin_src sh
hostnamectl set-hostname tsic2.ezmeral.hpe.com

# Configurando la red
nmcli
nmcli device show
nmcli connection show
nmcli connection --help
nmcli connection modify --help
nmcli connection modify ens192 ipv4.method manual ipv4.addr "172.16.51.199"
nmcli connection show
nmcli connection show --active
nmcli connection up ens192
nmcli connection show --active
ip addr

nmcli connection modify ens192 ipv4.gw4 172.16.51.129
nmcli connection down ens192
nmcli connection up ens192

# Configurando el DNS
vi /etc/resolv.conf
nameserver 8.8.8.8
#+end_src

* Semana 02

** LVM
#+BEGIN_SRC shell
lsblk

parted
partprobe
lsblk

pvcreate /dev/sda4
vgcreate VG_TS /dev/sda4
pvs
vgs

lvcreate -L 1G -n lv_cap01 VG_TS
mkfs.ext3 /dev/VG_TS/lv_cap01
lvs

# Mounting
mkdir /cap01
mount /dev/VG_TS/lv_cap01 /cap01

df -h
lsblk
#+END_SRC

* Semana 04

[[https://access.redhat.com/sites/default/files/attachments/rh_sm_command_cheatsheet_1214_jcs_print.pdf][Manual para =subscription manager= ]]

** Instalaciones de paquetes sin Internet (Usando el disco de instalación)

#+begin_src shell
mount /dev/cdroom /mnt
vi /etc/yum.repos.d/repos.repo
#+end_src

Escribir lo siguiente:

#+begin_src shell
[AppStream]
name=AppStream
baseurl=file:///mnt/AppStream
enable=1
gpgcheck=0

[Baseos]
name=BaseOS
baseurl=file:///mnt/BaseOS
enable=1
gpgcheck=0
#+end_src

#+RESULTS:

#+begin_src shell
yum repolist # Ahora deberíamos ver 4 repositorios
#+end_src

Al final no vamos a instalar nada con el disco por lo que al final eliminaremos el archivo.

** Usando paquetes =rpm=

#+begin_src shell
dnf search yum
dnf install yum-utils
dnf search dns
dnf search ntp

yumdownloader ntpstat
rpm -ivh ntpstat-0.5-2.el8.noarch.rpm
# No nos dejara por las dependencias
yumdownloader chrony
rpm -ivh chrony-3.5-2.el8.x86_64.rpm
# Ahora sí ya podremos instalar ntpstat
#+end_src

** Firewall-cmd

Es la evolución de /IP tables/

#+begin_src shell
systemctl status firewalld

firewall-cmd --help
firewall-cmd --get-default-zone

firewall-cmd --list-all
firewall-cmd --list-all-zones

firewall-cmd --permanent --set-target=DROP
firewall-cmd --add-icmp-block-inversion --permanent
# Despues de agregar una regla
firewall-cmd --reload
#+end_src

Las zonas sirven para categorizar las interfaces, fuentes, servicios, protocolos, etc.

#+begin_src shell
firewall-cmd --permanent --zone block --add-source=172.16.51.199
firewall-cmd --reload
# Primero revisa el log
firewall-cmd --permanent --zone block --remove-source=172.16.51.199
firewall-cmd --reload
#+end_src

Zonas:
- DROP: Manda una alerta
- BLOCK: No manda alerta, solo no lo deja pasar

Vemos los logs del sistema

#+begin_src shell
tail -f /var/log/messages
tail -f /var/log/secure
tail -f /var/log/firewalld
#+end_src
